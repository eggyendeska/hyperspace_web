!function(e,t){e.fn.popup=function(t){var n=this.selector,o=new e.Popup(t);return e(document).on("click.popup",n,function(n){var i=t&&t.content?t.content:e(this).attr("href");n.preventDefault(),o.open(i,void 0,this)}),this.each(function(){e(this).data("popup",o)})},e.Popup=function(n){function o(t){var n;return e.each(t,function(e,t){if(t)return n=t,!1}),n}function i(t){return"function"==typeof t?"function":t instanceof e?"jQuery":"#"===t.substr(0,1)||"."===t.substr(0,1)?"inline":-1!==e.inArray(t.substr(t.length-3),f)?"image":"http"===t.substr(0,4)?"external":"ajax"}function a(n){u&&u.fadeOut("fast",function(){e(this).remove()});var o=!0;void 0===p&&(o=!1,p=e('<div class="'+d.o.containerClass+'">'),h=e(d.o.markup).appendTo(p),e(d.o.closeContent).one("click",function(){d.close()}).appendTo(p),e(t).resize(d.center),p.appendTo(e("body")).css("opacity",0));var i=e("."+d.o.contentClass,p);d.width?i.css("width",d.width,10):i.css("width",""),d.height?i.css("height",d.height,10):i.css("height",""),h.hasClass(d.o.contentClass)?h.html(n):h.find("."+d.o.contentClass).html(n),o?d.o.replaced.call(d,p,r):d.o.show.call(d,p,r)}function l(e,t){var n=new RegExp("[?&]"+e+"=([^&]*)").exec(t);return n&&decodeURIComponent(n[1].replace(/\+/g," "))}var c,s,r,p,u,h,d=this,f=["png","jpg","gif"];d.ele=void 0,d.o=e.extend(!0,{},{backClass:"popup_back",backOpacity:.7,containerClass:"popup_cont",closeContent:'<div class="popup_close">&times;</div>',markup:'<div class="popup"><div class="popup_content"/></div>',contentClass:"popup_content",preloaderContent:'<p class="preloader">Loading</p>',activeClass:"popup_active",hideFlash:!1,speed:200,popupPlaceholderClass:"popup_placeholder",keepInlineChanges:!0,modal:!1,content:null,type:"auto",width:null,height:null,typeParam:"pt",widthParam:"pw",heightParam:"ph",beforeOpen:function(e){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},error:function(){},show:function(e,t){var n=this;n.center(),e.animate({opacity:1},n.o.speed,function(){n.o.afterOpen.call(n)})},replaced:function(e,t){this.center().o.afterOpen.call(this)},hide:function(e,t){void 0!==e&&e.animate({opacity:0},this.o.speed)},types:{inline:function(t,n){var o=e(t);o.addClass(d.o.popupPlaceholderClass),d.o.keepInlineChanges||(s=o.html()),n.call(this,o.children())},image:function(t,n){var o=this;e("<img />").one("load",function(){var e=this;setTimeout(function(){n.call(o,e)},0)}).one("error",function(){d.o.error.call(d,t,"image")}).attr("src",t).each(function(){this.complete&&e(this).trigger("load")})},external:function(t,n){var o=e("<iframe />").attr({src:t,frameborder:0,width:d.width,height:d.height});n.call(this,o)},html:function(e,t){t.call(this,e)},jQuery:function(e,t){t.call(this,e.html())},function:function(e,t){t.call(this,e.call(d))},ajax:function(t,n){e.ajax({url:t,success:function(e){n.call(this,e)},error:function(e){d.o.error.call(d,t,"ajax")}})}}},n),d.open=function(t,n,s){if(null===(t=void 0===t||"#"===t?d.o.content:t))return d.o.error.call(d,t,c),!1;if(void 0!==s&&(d.ele&&d.o.activeClass&&e(d.ele).removeClass(d.o.activeClass),d.ele=s,d.ele&&d.o.activeClass&&e(d.ele).addClass(d.o.activeClass)),void 0===r&&(r=e('<div class="'+d.o.backClass+'"/>').appendTo(e("body")).css("opacity",0).animate({opacity:d.o.backOpacity},d.o.speed),d.o.modal||r.one("click.popup",function(){d.close()}),d.o.hideFlash&&e("object, embed").css("visibility","hidden"),d.o.preloaderContent&&(u=e(d.o.preloaderContent).appendTo(e("body")))),n=o([n,d.o.type]),c=n="auto"===n?i(t):n,d.width=d.o.width?d.o.width:null,d.height=d.o.height?d.o.height:null,-1===e.inArray(n,["inline","jQuery","function"])){s=l(d.o.typeParam,t);var p=l(d.o.widthParam,t),h=l(d.o.heightParam,t);n=null!==s?s:n,d.width=null!==p?p:d.width,d.height=null!==h?h:d.height}d.o.beforeOpen.call(d,n),d.o.types[n]?d.o.types[n].call(d,t,a):d.o.types.ajax.call(d,t,a)},d.close=function(){return d.o.beforeClose.call(d),"inline"===c&&d.o.keepInlineChanges&&(s=e("."+d.o.contentClass).html()),void 0!==r&&r.animate({opacity:0},d.o.speed,function(){d.cleanUp()}),d.o.hide.call(d,p,r),d},d.cleanUp=function(){r.add(p).remove(),p=r=void 0,e(t).unbind("resize",d.center),d.o.hideFlash&&e("object, embed").css("visibility","visible"),d.ele&&d.o.activeClass&&e(d.ele).removeClass(d.o.activeClass);var n=e("."+d.o.popupPlaceholderClass);return"inline"==c&&n.length&&n.html(s).removeClass(d.o.popupPlaceholderClass),c=null,d.o.afterClose.call(d),d},d.center=function(){return p.css(d.getCenter()),r.css({height:document.documentElement.clientHeight}),d},d.getCenter=function(){var e=p.children().outerWidth(!0),t=p.children().outerHeight(!0);return{top:.5*document.documentElement.clientHeight-.5*t,left:.5*document.documentElement.clientWidth-.5*e}}}}(jQuery,window);